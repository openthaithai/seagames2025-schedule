import React, { useState, useMemo, useEffect } from 'react';
import { 
  Search, Calendar, MapPin, Globe, Type, X, ChevronRight, 
  Trophy, Menu, Info, Dumbbell, CalendarDays, Map, ExternalLink 
} from 'lucide-react';

// --- Components Section ---

// Custom Logo Component (SVG) to replace broken image
const SEAGamesLogo = () => (
<svg id="Layer_2" data-name="Layer 2" xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 319 312.1496">
  <g id="T">
    <g>
      <rect x="133.5432" y="215.8304" width="11.5092" height="47.6444" fill="#292d30"/>
      <path d="M158.1331,297.6725c0,6.9703-5.6691,12.6395-12.6385,12.6395s-12.6386-5.6692-12.6386-12.6395v-8.4882c0-6.9703,5.6691-12.6395,12.6386-12.6395s12.6385,5.6692,12.6385,12.6395v8.4882ZM145.4946,274.7071c-7.981,0-14.4763,6.4953-14.4763,14.4772v8.4882c0,7.9857,6.4953,14.4772,14.4763,14.4772s14.4771-6.4915,14.4771-14.4772v-8.4882c0-7.9819-6.4962-14.4772-14.4771-14.4772" fill="#292d30"/>
      <path d="M150.8988,298.08c0,2.9789-2.4244,5.4042-5.4042,5.4042s-5.4043-2.4253-5.4043-5.4042v-9.3029c0-2.9798,2.4254-5.4052,5.4043-5.4052s5.4042,2.4253,5.4042,5.4052v9.3029ZM145.4946,281.5343c-3.9943,0-7.2429,3.2476-7.2429,7.2428v9.3029c0,3.9943,3.2486,7.2419,7.2429,7.2419s7.2428-3.2476,7.2428-7.2419v-9.3029c0-3.9952-3.2476-7.2428-7.2428-7.2428" fill="#292d30"/>
      <path d="M127.7952,289.0202c0-7.8967-6.3865-14.3134-14.2463-14.3134-4.3339,0-8.3878,2.0023-11.0478,5.2878l1.3759,1.2292c2.3042-2.9164,5.866-4.6831,9.6719-4.6831,6.8482,0,12.4209,5.602,12.4209,12.4796,0,3.6423-1.586,7.1037-4.3425,9.4789l-5.1033,4.28h-7.6034l9.5461-8.0273c1.6664-1.4223,2.6193-3.524,2.6193-5.7316,0-4.1882-3.3867-7.574-7.5372-7.574-2.3912,0-4.6197,1.1497-6.0212,3.0338l1.3721,1.2169c1.0494-1.4942,2.7868-2.413,4.649-2.413,3.1521,0,5.7033,2.5682,5.7033,5.7364,0,1.6787-.7183,3.2609-1.9645,4.3302l-10.1924,8.5733c-.6671.5498-1.5018.8554-2.3534.8554h-.0047v1.8424l9.601-.0038-.0038.0038-2.9335,2.4632c-1.8632,1.5689-4.2384,2.4338-6.659,2.4338h-.0047v1.8377h22.6256v-1.8377h-16.1966c.4902-.3066.9605-.6463,1.4015-1.0201l4.6112-3.8769.0047-.0038h10.1792v-1.8386h-7.9847l3.4236-2.8786c3.1805-2.7272,4.9936-6.6883,4.9936-10.8804" fill="#292d30"/>
      <path d="M196.7086,286.7162c-1.9512.8857-3.6508,2.2285-4.968,3.9025v-6.5322h4.968v2.6297ZM202.2056,285.5249c-1.2842,0-2.5181.1845-3.6886.5242v-1.9626h14.2794v-1.8084h-14.2794v-4.986h14.2794v-1.796h-16.0877v6.782h-6.764v12.0291h1.6787c1.0239-2.3837,2.8237-4.351,5.0853-5.5849v5.5849h2.7064c.8015-.5242,1.7582-.8393,2.7906-.8393,2.8029,0,5.09,2.2834,5.09,5.0815,0,2.8076-2.2872,5.09-5.09,5.09-1.6201,0-3.0669-.7599-3.9943-1.9465l-1.6201.8308c1.2425,1.7667,3.2978,2.9202,5.6143,2.9202,3.7974,0,6.8861-3.0924,6.8861-6.8946,0-3.7927-3.0887-6.8861-6.8861-6.8861-1.3513,0-2.6222.3946-3.6886,1.0788v-4.8043c1.1582-.3946,2.396-.6084,3.6886-.6084,6.3448,0,11.5058,5.161,11.5058,11.5096,0,6.3448-5.1611,11.5058-11.5058,11.5058-4.2044,0-7.8845-2.2654-9.8906-5.6313l-1.5983.8271c2.3033,3.9488,6.5965,6.6088,11.4889,6.6088,7.3393,0,13.3104-5.971,13.3104-13.3104,0-7.3431-5.971-13.3142-13.3104-13.3142" fill="#292d30"/>
      <path d="M186.3258,289.0202c0-7.8967-6.3865-14.3134-14.2463-14.3134-4.3339,0-8.3878,2.0023-11.0478,5.2878l1.3759,1.2292c2.3042-2.9164,5.866-4.6831,9.6719-4.6831,6.8482,0,12.4209,5.602,12.4209,12.4796,0,3.6423-1.586,7.1037-4.3425,9.4789l-5.1033,4.28h-7.6034l9.547-8.0273c1.6655-1.4223,2.6184-3.524,2.6184-5.7316,0-4.1882-3.3867-7.574-7.5372-7.574-2.3912,0-4.6197,1.1497-6.0212,3.0338l1.3721,1.2169c1.0494-1.4942,2.7868-2.413,4.649-2.413,3.1521,0,5.7033,2.5682,5.7033,5.7364,0,1.6787-.7173,3.2609-1.9645,4.3302l-10.1924,8.5733c-.6671.5498-1.5018.8554-2.3534.8554h-.0047v1.8424l9.601-.0038-.0038.0038-2.9335,2.4632c-1.8632,1.5689-4.2384,2.4338-6.659,2.4338h-.0047v1.8377h22.6256v-1.8377h-16.1966c.4912-.3066.9605-.6463,1.4015-1.0201l4.6112-3.8769.0047-.0038h10.1792v-1.8386h-7.9847l3.4236-2.8786c3.1805-2.7272,4.9936-6.6883,4.9936-10.8804" fill="#292d30"/>
      <path d="M0,225.9955l14.5046.001c-.3984,1.3191-.6189,2.7158-.6189,4.1627l-.0028,33.3015,10.2511.001.0028-33.329c0-2.2805,1.8557-4.1352,4.1352-4.1352l11.5957.0019.001-10.1735-39.8678-.0038-.0009,10.1735Z" fill="#292d30"/>
      <path d="M185.1132,263.4739l.0009-10.1526-17.6746-.0019c.476-1.4459.7409-2.9855.7409-4.5885l.0028-32.8947-11.5087-.001-.0028,32.9183c-.0009,2.5171-2.0487,4.5649-4.5658,4.5649h-.0236v10.1536l33.0309.0019Z" fill="#292d30"/>
      <path d="M270.7712,215.8484l-10.1508-.0009-.0018,18.9001-14.0116-11.7301c-2.0913-1.7506-3.2988-4.3103-3.3366-7.0394v-.1315l-10.1546-.0047h-.0095l.0057,47.6358v.001h10.1546l.0019-29.6943,14.0031,11.7197c2.1197,1.7733,3.3376,4.3718,3.3451,7.1397v10.8368l10.1508.001h.0085l-.0047-47.633Z" fill="#292d30"/>
      <path d="M295.3145,253.1493h-4.791c.4183-1.3721.6482-2.8237.6482-4.3359l.0019-22.6426,4.1428.001c7.3999.001,13.4154,6.0496,13.4145,13.4902-.0009,7.4397-6.0164,13.4883-13.4164,13.4873M315.1704,226.7045l-.0066-.0208-.0161-.0152c-4.2327-6.5076-11.5389-10.8207-19.8303-10.8217l-14.4119-.0009v9.3228l-.0028,23.6438c0,2.3932-1.9323,4.3359-4.3132,4.3349v10.3353l18.7241.0019c4.1826,0,8.1134-1.1005,11.5285-3.0234l.0246-.0076.0341-.0265c1.884-1.0674,3.6119-2.3827,5.1326-3.9081l.0038-.0028.0009-.001c4.2971-4.315,6.9609-10.2757,6.9618-16.8524,0-4.7768-1.4109-9.2253-3.8296-12.9584" fill="#292d30"/>
      <path d="M71.7571,215.8279l-.001,12.8666c0,1.604-.599,3.0679-1.5794,4.1911l-.7816.7608c-1.0996.8952-2.501,1.4346-4.0274,1.4346l-6.0079-.001c-1.6484,0-3.2287.2811-4.7125.7779l.0019-20.0309-10.1536-.001-.0038,47.6462,10.1536.001v-.0066h.0076l.0009-13.7343c0-2.4774,2.0156-4.492,4.492-4.492l6.2029.001c2.3383,0,4.5611-.493,6.5795-1.3702l-.2139,19.5928,10.1527.0085.0435-47.6396-10.1536-.0047Z" fill="#292d30"/>
      <path d="M107.1557,244.398c-1.8017-.001-3.5495.2394-5.2197.6794l5.2206-16.5684,5.2178,16.5694c-1.6701-.441-3.418-.6804-5.2187-.6804M113.1731,215.8364l-12.0311-.0009-15.0118,47.6349,10.0126.001c.1939-.6179.2867-.8659.5725-1.7705,1.4232-4.4608,5.5291-7.7548,10.4394-7.7538,4.9093,0,9.0153,3.294,10.4375,7.7557.2858.9047.3785,1.1526.5716,1.7705l10.0126.001-15.0033-47.6377Z" fill="#292d30"/>
      <path d="M208.3145,244.4065c-1.8017-.001-3.5495.2394-5.2197.6794l5.2206-16.5694,5.2178,16.5703c-1.6701-.441-3.418-.6804-5.2187-.6804M214.3319,215.8449l-12.0311-.0009-15.0118,47.6349,10.0135.001c.193-.6179.2858-.8659.5716-1.7705,1.4232-4.4608,5.5291-7.7548,10.4394-7.7538,4.9093,0,9.0153,3.294,10.4375,7.7557.2858.9047.3785,1.1516.5716,1.7705l10.0126.001-15.0033-47.6377Z" fill="#292d30"/>
    </g>
    <path d="M180.8986,171.4887c-1.0182-.4646-2.0809-.7589-3.1644-.8942,1.0182-.4334,1.9758-1.0371,2.8351-1.7913,1.6863-1.4715,2.8038-3.3536,3.3479-5.3645,1.692,1.4128,2.889,3.4236,3.2334,5.7695.3502,2.3648-.2289,4.6605-1.4667,6.5066-1.0977-1.7961-2.7243-3.2931-4.7854-4.2261M184.8758,185.2316c-.9586,2.1206-2.6401,3.7671-4.756,4.686.0047-.0852.0047-.1647.0047-.2498,0-2.026-.564-4.0775-1.7411-5.8982-.6142-.9482-1.3579-1.7818-2.201-2.4755.5791.0994,1.1724.1495,1.7771.1495.528,0,1.0627-.035,1.5963-.1145,2.2105-.3293,4.1665-1.3021,5.7089-2.7045.6691,2.1007.5886,4.4457-.3889,6.607M174.2964,197.4774c-1.9966,1.2974-4.3112,1.7213-6.4971,1.3721,1.1724-1.7364,1.8613-3.8324,1.8613-6.0827v-.0549c-.0057-1.1176-.1798-2.1906-.4997-3.2041.8034.7239,1.7317,1.338,2.7698,1.8064,1.4327.6492,2.9543.9785,4.4816.9785.5933,0,1.1923-.0501,1.7866-.1552-.5791,2.1263-1.9162,4.0529-3.9025,5.3398M158.8266,202.0536h-.0502c-2.3004,0-4.4759-.828-6.183-2.36,1.9862-.8536,3.6725-2.2862,4.8554-4.1523.5886-.9283,1.0334-1.921,1.3125-2.9543.2896,1.0381.7334,2.0563,1.3523,3.0092,1.2226,1.8859,2.9297,3.2684,4.8554,4.087-1.6314,1.462-3.7823,2.361-6.1423,2.3704M143.2868,197.5427c-1.9616-1.2481-3.3584-3.1445-3.9725-5.3701.5885.1003,1.1829.1505,1.7866.1505,1.5225,0,3.0735-.3199,4.5459-1.004,1.0182-.4684,1.9465-1.0825,2.7546-1.8206-.334,1.0627-.5034,2.1802-.4987,3.3281.0104,2.1859.6633,4.2772,1.8661,6.0429-2.2606.3747-4.5412-.0889-6.482-1.3267M132.6524,185.3413c-1.0031-2.1708-1.0929-4.5317-.4296-6.6524,1.5623,1.4128,3.5486,2.3856,5.7837,2.695.5043.07,1.0087.105,1.5074.105.6084,0,1.2131-.0501,1.8017-.1552-.8583.7135-1.6125,1.567-2.2304,2.5351-1.1734,1.8462-1.7526,3.9526-1.6967,6.0884-2.0212-.8734-3.7435-2.4651-4.7361-4.616M130.3066,169.3274c.3293-2.3648,1.532-4.4012,3.2344-5.8234.1939.7135.4589,1.4024.7883,2.0562.634,1.2567,1.5169,2.3894,2.6193,3.3375.8535.7343,1.8017,1.3229,2.8048,1.7516-1.093.1306-2.1859.4343-3.2382.9188-1.9815.9179-3.6082,2.3751-4.721,4.2062-1.2273-1.8263-1.8112-4.0964-1.4876-6.447M136.994,154.5909c1.5122-1.761,3.5826-2.8691,5.8735-3.1634-.3397,1.058-.5091,2.1556-.5091,3.2637,0,1.0475.1495,2.1007.4589,3.1284.3199,1.0778.7987,2.0809,1.4071,2.9893-1.0031-.4892-2.0856-.8185-3.2183-.9785-2.2162-.3085-4.3718.0805-6.2483.9936-.0492-2.2853.7343-4.4863,2.236-6.2332M150.5873,145.8132c.8829-.264,1.7762-.3889,2.6496-.3889,1.4024,0,2.7698.3189,4.0028.9132-1.622,1.3418-2.8692,3.1634-3.4984,5.3342-.3142,1.0835-.4542,2.1906-.4296,3.2836-.5735-.9425-1.3021-1.8112-2.185-2.5701-1.6569-1.4213-3.663-2.3004-5.7893-2.5446,1.198-1.9465,3.0442-3.3688,5.2499-4.0274M164.1958,145.4092c.8536,0,1.7166.1192,2.5748.369,2.2361.6444,4.1069,2.0714,5.32,4.0321-2.0913.2498-4.1324,1.1128-5.8385,2.6004-.8431.7381-1.5623,1.5917-2.131,2.5247.0246-1.1024-.1202-2.2209-.4495-3.3337-.6388-2.1452-1.886-3.947-3.4975-5.2698,1.2368-.5981,2.6146-.9226,4.0217-.9226M172.7843,169.8715c-1.3977-.0946-2.73-.4939-3.9129-1.1582.7589-3.7227,3.7728-6.7517,7.7406-7.3356.4589-.0643.9131-.0994,1.3617-.0994,1.622,0,3.1738.4239,4.5261,1.1876-.3889,1.9257-1.392,3.7426-2.9836,5.1345-1.867,1.6323-4.262,2.4357-6.7318,2.2711M169.7647,174.9171c.9387-.9633,2.0809-1.7175,3.3735-2.201,1.0684-.4041,2.1755-.6037,3.2836-.6037,1.303,0,2.6004.2792,3.823.8327,1.9408.8791,3.4378,2.3506,4.3614,4.1021-1.3674,1.4128-3.1937,2.396-5.285,2.7045-3.9867.5848-7.7642-1.462-9.5565-4.8346M167.4643,178.9435c.1201-.4589.2848-.9179.4892-1.3674.2101-.4637.4543-.9085.7334-1.3267.634,1.0324,1.4326,1.9408,2.3553,2.7045-1.2027-.2054-2.4054-.2054-3.5779-.0104M163.0584,182.7665c.3539-.3199.7333-.6141,1.1421-.8782.4344-.2801.8838-.5195,1.3428-.7192-.0303,1.198.1448,2.3856.5091,3.5079-.8782-.7883-1.8916-1.4365-2.994-1.9106M148.7913,176.2741c.2687.3993.5081.8233.7183,1.2728.2148.4637.3889.9378.5242,1.4213-1.1829-.1987-2.395-.194-3.6034.0208.9283-.7637,1.727-1.6768,2.361-2.7149M147.7126,174.9464c-1.7714,3.3536-5.514,5.4146-9.4865,4.8601-2.1102-.2943-3.9564-1.2822-5.3437-2.6997.9075-1.7412,2.3846-3.2032,4.3009-4.0917,1.2576-.5782,2.5805-.8526,3.8826-.8526,2.485,0,4.8951.9974,6.6467,2.7839M146.9148,165.0104c.8431,1.1185,1.4166,2.3903,1.6863,3.7236-1.1677.6586-2.4802,1.0627-3.857,1.1677-.2394.0199-.4845.0293-.7239.0293-2.2152,0-4.3311-.7883-6.0278-2.2455-1.5822-1.3522-2.6354-3.1539-3.0442-5.1553,1.3569-.7731,2.9192-1.2075,4.5506-1.2075.4239,0,.8536.0303,1.2879.0899,2.4547.3397,4.6311,1.6172,6.1281,3.5978M157.2539,163.0848c-.4333.2091-.8829.3842-1.3569.5243-.494.1448-.9879.2489-1.4867.3142.3643-1.1526.529-2.361.4987-3.558.634,1.0428,1.427,1.9607,2.3449,2.7196M163.0385,163.908c-.4741-.0549-.9538-.1495-1.428-.2896-.4939-.1448-.9681-.3246-1.4223-.5384.9331-.7741,1.7222-1.6967,2.3458-2.7196-.0303,1.2169.1401,2.4149.5044,3.5476M166.4168,166.7176c-.335-.3842-.6341-.7939-.8981-1.2179,1.2018-.1542,2.3695-.5034,3.4426-1.0324-.6737.9927-1.1829,2.096-1.5017,3.2685-.3691-.3094-.7183-.6492-1.0428-1.0182M168.7815,171.9221c-.0747-.5091-.1041-1.0125-.0946-1.5065,1.0731.5186,2.2313.8583,3.4331.9974-1.1223.4741-2.1348,1.128-3.0139,1.9313-.1448-.4589-.2545-.933-.3246-1.4223M150.0082,167.7556c-.3094-1.1478-.8081-2.2408-1.4913-3.2438,1.0929.5242,2.2455.864,3.4227,1.0031-.2499.4088-.5337.8034-.8583,1.1781-.3293.3889-.6889.7428-1.0731,1.0627M148.3721,173.3642c-.899-.8081-1.9219-1.4516-3.0196-1.921,1.2122-.1495,2.3657-.4892,3.4331-1.0078.0151.4788-.0151.9681-.0842,1.4516-.0701.5091-.1798,1.0031-.3293,1.4772M151.9651,181.1843c.4391.1893.8725.4192,1.2869.6832.4297.2744.8337.5791,1.2028.9141-1.0882.4684-2.096,1.1223-2.994,1.9408.3643-1.1573.5337-2.3505.5043-3.5381M165.7278,179.3826c-.8337.2848-1.6314.6737-2.3903,1.1677-.7381.4788-1.4024,1.0333-1.9815,1.6475-.828-.2053-1.6863-.3094-2.5748-.3094h-.0549c-.8781.0047-1.7364.1145-2.5701.3189-.6037-.634-1.2926-1.198-2.0506-1.6816-.7391-.4741-1.5226-.8488-2.3354-1.1232-.1647-.8583-.4343-1.7062-.8138-2.5247-.3738-.8034-.828-1.5424-1.3617-2.2058.3293-.8034.564-1.6664.6879-2.5654.1202-.8678.1353-1.7308.0502-2.5796.7135-.5138,1.3721-1.1128,1.9616-1.7961.5735-.669,1.0523-1.3929,1.4365-2.1462.8791-.0397,1.7572-.1892,2.6202-.4495.8488-.2546,1.6418-.5981,2.3752-1.0277.7589.4438,1.5822.793,2.4452,1.0428.8488.2451,1.7024.3842,2.5502.4192.3993.7788.898,1.5169,1.4923,2.1963.5734.6633,1.2226,1.2472,1.9209,1.7412-.0795.8583-.0643,1.7468.0701,2.6448.1296.8734.3595,1.7118.6785,2.4954-.5489.6879-1.0125,1.4516-1.3825,2.2701-.3643.8081-.6189,1.6323-.7731,2.4651M164.1457,159.981c.1647-2.4755,1.2879-4.7361,3.154-6.3675,1.6068-1.4024,3.5684-2.1509,5.5547-2.2654.7334,1.8859.8327,3.9517.2593,5.9275-1.1175,3.8731-4.5516,6.4584-8.3642,6.6874-.4883-1.2529-.6983-2.6051-.6037-3.982M158.7064,147.2052c1.5917,1.1582,2.8294,2.8246,3.4331,4.8506,1.1526,3.8627-.3388,7.8996-3.418,10.1508-1.0825-.7892-1.991-1.8169-2.66-3.0243-1.198-2.1755-1.4772-4.6812-.7883-7.0659.5943-2.0458,1.8311-3.7378,3.4331-4.9112M144.5737,151.3726c2.0269.1098,3.9526.8782,5.5149,2.2256,3.0536,2.625,3.982,6.8161,2.6146,10.3798-1.3428-.07-2.66-.4391-3.877-1.0977-1.0929-.5943-2.0316-1.3778-2.7953-2.3108-.7579-.933-1.3324-2.0165-1.6863-3.2088-.5943-1.991-.5091-4.0766.229-5.9881M139.02,190.4967c-.1845-2.0213.3047-4.033,1.4119-5.7695,1.3324-2.096,3.399-3.5429,5.8187-4.087.6738-.1495,1.3579-.2243,2.0364-.2243.6936,0,1.3768.0795,2.0458.229.1202,1.3428-.0549,2.7054-.5337,4.0028-.4296,1.163-1.0731,2.2105-1.8859,3.0934-.8185.8838-1.8074,1.6125-2.9344,2.131-1.937.899-4.0274,1.0684-5.9587.6245M151.4257,198.436c-1.2425-1.602-1.9209-3.558-1.9313-5.619-.0199-4.0274,2.5398-7.4756,6.1233-8.7777,1.2624,1.6361,1.9314,3.6479,1.9314,5.6786,0,1.7061-.4646,3.4284-1.4478,4.9699-1.1129,1.7563-2.749,3.0593-4.6756,3.7482M158.7566,186.8232c-.3141-1.163-.8138-2.2408-1.4771-3.2136.4741-.0795.9576-.1249,1.4525-.1249h.0492c.494,0,.9785.0397,1.4526.1155-.6738.9926-1.1677,2.0856-1.4772,3.223M161.4563,194.7275c-2.1906-3.383-1.8964-7.6744.4391-10.7034,1.3021.4637,2.4698,1.2075,3.4331,2.1651,1.6768,1.6721,2.7244,3.9829,2.7395,6.5322.0104,2.1462-.7088,4.122-1.9314,5.7042-1.8661-.6586-3.5278-1.9162-4.6803-3.6981M178.4932,190.4512c-1.9711.4589-4.0321.2593-5.9039-.5886-3.6725-1.6626-5.7439-5.425-5.4241-9.2272.6833-.1599,1.3825-.2347,2.0705-.2347,1.5225,0,3.029.3747,4.3812,1.0882,1.3475.7182,2.5408,1.7762,3.4237,3.1483,1.163,1.7923,1.6219,3.8381,1.4525,5.814M180.4038,154.501c1.5727,1.8017,2.3259,4.0425,2.2814,6.2634-1.8916-.9188-4.0728-1.2926-6.3079-.9633-1.128.1647-2.1906.4987-3.1644.9785.6189-.9141,1.1081-1.9418,1.4326-3.0593.6085-2.096.5735-4.2819-.0795-6.3174,2.1849.2688,4.2762,1.3116,5.8376,3.0981M188.7329,168.9782c-.4543-3.064-2.1509-5.6436-4.5015-7.3006.2848-2.8852-.5735-5.8792-2.625-8.2289-2.0355-2.3307-4.8554-3.5836-7.7245-3.7028-.0501-.1051-.1051-.2054-.1599-.3047-1.4024-2.5445-3.7122-4.3917-6.5066-5.1951-2.9752-.8583-6.0241-.3889-8.509,1.0636-2.5048-1.4573-5.584-1.9162-8.5733-1.0286-2.784.8337-5.0797,2.6998-6.4622,5.2547-.0445.0804-.0851.1599-.1249.2394-.1098,0-.2195.0057-.3293.0152-2.8994.2252-5.5395,1.5576-7.4302,3.7624-1.8964,2.2058-2.8152,5.0153-2.5947,7.9147.0047.0899.0142.1798.0293.2697-2.3648,1.6721-4.0614,4.2819-4.4911,7.3753-.4296,3.064.4741,6.0136,2.2654,8.2639-.0445.1051-.0842.2101-.1249.3151-1.0031,2.7291-.8829,5.6834.335,8.3178,1.2973,2.8105,3.6526,4.8062,6.377,5.7288.0151.1098.0397.2252.0653.335.6341,2.8341,2.3307,5.2547,4.7854,6.8161,1.7667,1.1232,3.7681,1.7024,5.8139,1.7024.793,0,1.5917-.0899,2.3856-.265.0899-.0199.1788-.0398.264-.0643.07.0795.1495.1599.2299.2394,2.0506,2.0307,4.7655,3.1492,7.6497,3.1492h.0596c3.084-.0152,5.8689-1.3229,7.84-3.4038.8479.2091,1.7165.3142,2.59.3142,2.026,0,4.0718-.564,5.8981-1.7468,2.6004-1.6816,4.2375-4.2914,4.7665-7.1161.1097-.034.2138-.0748.3236-.1145,2.7196-1.0229,4.8762-3.0489,6.0732-5.6938,1.2775-2.8246,1.2482-5.9133.1647-8.578,1.8017-2.2711,2.695-5.25,2.2408-8.3339" fill="#c8b12f"/>
    <g>
      <g>
        <polygon points="106.6007 47.4233 108.9967 40.2345 109.0071 40.2458 112.9086 44.788 113.1262 45.0378 121.6996 55.0239 121.8945 55.2519 126.0458 60.0988 126.0562 60.1092 134.8907 70.4 134.9021 70.4105 139.0307 75.2242 139.1178 75.3226 158.667 98.1091 158.7209 98.1744 162.9376 103.0856 163.0028 103.1622 170.9781 112.4415 171.033 112.5067 175.3026 117.4842 175.3575 117.5381 183.312 126.8183 183.3772 126.894 187.68 131.8383 179.1284 131.8383 171.0765 122.5364 171.0217 122.4711 166.752 117.4842 166.6972 117.4189 158.7313 108.1491 158.6556 108.063 154.4504 103.1622 154.385 103.0969 133.3378 78.5816 133.2394 78.4624 129.0446 73.5729 129.0228 73.5512 120.0151 63.0323 119.9934 63.0105 115.7115 58.0444 115.4834 57.7842 106.6007 47.4233" fill="#ff000b"/>
        <polygon points="99.7111 68.08 101.8847 61.5819 102.5972 61.4863 107.3173 66.9833 116.9883 78.2403 121.4443 83.424 146.3713 112.437 150.6418 117.4031 158.672 126.759 163.095 131.8329 154.4128 131.8329 146.3173 122.4553 142.0468 117.4684 114.5762 85.4225 109.947 80.0221 99.7111 68.08" fill="#ff000b"/>
        <polygon points="138.3844 131.8332 129.8328 131.8332 92.9411 88.3894 95.0389 82.0938 95.8187 82.2462 100.4829 87.6939 134.0163 126.8236 138.3844 131.8332" fill="#ff000b"/>
      </g>
      <g>
        <polygon points="210.8524 47.4233 201.7359 58.0397 197.4435 63.0276 188.4245 73.5455 184.2079 78.4576 163.0623 103.0912 158.7917 108.0573 150.7616 117.4132 146.4257 122.4664 138.3842 131.8336 129.8327 131.8336 134.1468 126.8127 142.1551 117.4785 146.4806 112.4367 154.5107 103.0808 158.7804 98.1043 178.4166 75.2195 182.5566 70.3944 191.3911 60.1045 195.552 55.2472 204.5397 44.7823 208.4507 40.2297 210.8524 47.4233" fill="#00d0f0"/>
        <polygon points="215.4977 61.6397 217.7413 68.0782 207.441 80.1055 202.8118 85.5059 175.3422 117.5508 171.0716 122.5387 163.0944 131.833 154.4123 131.833 166.7461 117.4855 171.0177 112.5194 195.9446 83.5064 200.3997 78.3236 213.2843 63.326 215.4977 61.6397" fill="#00d0f0"/>
        <polygon points="179.1281 131.8382 183.4365 126.8239 216.9708 87.6942 221.7486 82.1121 222.4735 82.2729 224.3708 87.9658 224.5117 88.3897 187.6796 131.8382 179.1281 131.8382" fill="#00d0f0"/>
      </g>
      <g>
        <path d="M92.9413,88.3893c48.5622,0,88.853-39.8271,88.853-88.3893h-6.5199c0,44.3352-36.042,80.8484-80.1491,81.8477l-2.184,6.5416Z" fill="#c8b12f"/>
        <path d="M99.7116,68.0778C134.5385,64.8832,161.9968,35.6422,161.9968.0005h-6.5199c0,31.2623-23.3722,57.0702-53.4943,61.2537l-2.271,6.8236Z" fill="#c8b12f"/>
        <path d="M106.6007,47.4233C127.1161,41.599,142.179,22.3526,142.179.0005h-6.5199c0,17.7447-10.9551,33.329-26.4618,39.6426v.0113l-2.5966,7.769Z" fill="#c8b12f"/>
      </g>
      <g>
        <path d="M224.5117,88.3893c-48.5623,0-88.8531-39.8271-88.8531-88.3893h6.5199c0,44.3352,36.042,80.8484,80.1491,81.8477l2.1841,6.5416Z" fill="#0057ff"/>
        <path d="M217.7416,68.0778C182.9146,64.8832,155.4772,35.6422,155.4772.0005h6.5198c0,31.2623,23.3514,57.0702,53.4735,61.2537l2.2711,6.8236Z" fill="#0057ff"/>
        <path d="M210.8524,47.4233C190.3369,41.599,175.2741,22.3526,175.2741.0005h6.5199c0,17.7447,10.9551,33.329,26.4618,39.6426v.0113l2.5966,7.769Z" fill="#0057ff"/>
      </g>
    </g>
  </g>
</svg>
);

// --- Data Section (Mock Data based on Images) ---
// Note: This contains a representative subset of the data from the images for demonstration.

const sportsData = [
  {
    id: 'aquatics',
    name_en: 'Aquatics',
    name_th: '‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥',
    icon: 'üèä',
    category: 'Water Sports',
    events: [
      { name_en: 'Swimming', name_th: '‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥', dates: '10-15 Dec', venue_en: 'Swimming Pool, SAT, Bangkok', venue_th: '‡∏™‡∏£‡∏∞‡∏ß‡πà‡∏≤‡∏¢‡∏ô‡πâ‡∏≥ ‡∏Å‡∏Å‡∏ó., ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø' },
      { name_en: 'Diving', name_th: '‡∏Å‡∏£‡∏∞‡πÇ‡∏î‡∏î‡∏ô‡πâ‡∏≥', dates: '16-18 Dec', venue_en: 'Aquatic Center, Assumption Univ.', venue_th: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥ ‡∏°.‡∏≠‡∏±‡∏™‡∏™‡∏±‡∏°‡∏ä‡∏±‡∏ç' },
      { name_en: 'Water Polo', name_th: '‡πÇ‡∏õ‡πÇ‡∏•‡∏ô‡πâ‡∏≥', dates: '12-16 Dec', venue_en: 'Thammasat Water Sports Center', venue_th: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏≤‡∏á‡∏ô‡πâ‡∏≥ ‡∏ò‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå' }
    ]
  },
  {
    id: 'athletics',
    name_en: 'Athletics',
    name_th: '‡∏Å‡∏£‡∏µ‡∏ë‡∏≤',
    icon: 'üèÉ',
    category: 'Main Sports',
    events: [
      { name_en: 'Track & Field', name_th: '‡∏•‡∏π‡πà‡πÅ‡∏•‡∏∞‡∏•‡∏≤‡∏ô', dates: '11-15 Dec', venue_en: 'Suphachalasai Stadium', venue_th: '‡∏™‡∏ô‡∏≤‡∏°‡∏®‡∏∏‡∏†‡∏ä‡∏•‡∏≤‡∏®‡∏±‡∏¢' }
    ]
  },
  {
    id: 'badminton',
    name_en: 'Badminton',
    name_th: '‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô',
    icon: 'üè∏',
    category: 'Racket Sports',
    events: [
      { name_en: 'Badminton', name_th: '‡πÅ‡∏ö‡∏î‡∏°‡∏¥‡∏ô‡∏ï‡∏±‡∏ô', dates: '10-17 Dec', venue_en: 'Gymnasium 4, Thammasat Univ.', venue_th: '‡∏¢‡∏¥‡∏°‡πÄ‡∏ô‡πÄ‡∏ã‡∏µ‡∏¢‡∏° 4 ‡∏°.‡∏ò‡∏£‡∏£‡∏°‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå' }
    ]
  },
  {
    id: 'basketball',
    name_en: 'Basketball',
    name_th: '‡∏ö‡∏≤‡∏™‡πÄ‡∏Å‡∏ï‡∏ö‡∏≠‡∏•',
    icon: 'üèÄ',
    category: 'Team Sports',
    events: [
      { name_en: '5x5', name_th: '5x5', dates: '13-18 Dec', venue_en: 'Nimibutr Stadium', venue_th: '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡∏ô‡∏¥‡∏°‡∏¥‡∏ö‡∏∏‡∏ï‡∏£' },
      { name_en: '3x3', name_th: '3x3', dates: '10-11 Dec', venue_en: 'Nimibutr Stadium', venue_th: '‡∏≠‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡∏ô‡∏¥‡∏°‡∏¥‡∏ö‡∏∏‡∏ï‡∏£' }
    ]
  },
  {
    id: 'football',
    name_en: 'Football',
    name_th: '‡∏ü‡∏∏‡∏ï‡∏ö‡∏≠‡∏•',
    icon: '‚öΩ',
    category: 'Team Sports',
    events: [
      { name_en: 'Men', name_th: '‡∏ä‡∏≤‡∏¢', dates: '9-20 Dec', venue_en: '700th Anniversary Stadium, Chiangmai', venue_th: '‡∏™‡∏ô‡∏≤‡∏°‡∏™‡∏°‡πÇ‡∏†‡∏ä‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà 700 ‡∏õ‡∏µ' },
      { name_en: 'Women', name_th: '‡∏´‡∏ç‡∏¥‡∏á', dates: '10-19 Dec', venue_en: 'National Sports Univ. Chonburi', venue_th: '‡∏°.‡∏Å‡∏≤‡∏£‡∏Å‡∏µ‡∏¨‡∏≤‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥ ‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ' }
    ]
  },
  {
    id: 'esports',
    name_en: 'Esports',
    name_th: '‡∏≠‡∏µ‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï',
    icon: 'üéÆ',
    category: 'Modern Sports',
    events: [
      { name_en: 'Esports', name_th: '‡∏≠‡∏µ‡∏™‡∏õ‡∏≠‡∏£‡πå‡∏ï', dates: '13-18 Dec', venue_en: 'Sala Phra Kiao, Chulalongkorn Univ.', venue_th: '‡∏®‡∏≤‡∏•‡∏≤‡∏û‡∏£‡∏∞‡πÄ‡∏Å‡∏µ‡πâ‡∏¢‡∏ß ‡∏à‡∏∏‡∏¨‡∏≤‡∏•‡∏á‡∏Å‡∏£‡∏ì‡πå‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢' }
    ]
  },
  {
    id: 'muay',
    name_en: 'Muay',
    name_th: '‡∏°‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢',
    icon: 'ü•ä',
    category: 'Combat Sports',
    events: [
      { name_en: 'Muay', name_th: '‡∏°‡∏ß‡∏¢‡πÑ‡∏ó‡∏¢', dates: '13-17 Dec', venue_en: 'Lumphini Boxing Stadium', venue_th: '‡∏™‡∏ô‡∏≤‡∏°‡∏°‡∏ß‡∏¢‡∏•‡∏∏‡∏°‡∏û‡∏¥‡∏ô‡∏µ' }
    ]
  },
  {
    id: 'sepaktakraw',
    name_en: 'Sepak Takraw',
    name_th: '‡πÄ‡∏ã‡∏õ‡∏±‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠',
    icon: 'üß∂',
    category: 'Traditional Sports',
    events: [
      { name_en: 'Sepak Takraw', name_th: '‡πÄ‡∏ã‡∏õ‡∏±‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≠', dates: '10-19 Dec', venue_en: 'Nakhon Pathom Gymnasium', venue_th: '‡∏¢‡∏¥‡∏°‡πÄ‡∏ô‡πÄ‡∏ã‡∏µ‡∏¢‡∏° ‡∏ô‡∏Ñ‡∏£‡∏õ‡∏ê‡∏°' }
    ]
  },
  {
    id: 'volleyball',
    name_en: 'Volleyball',
    name_th: '‡∏ß‡∏≠‡∏•‡πÄ‡∏•‡∏¢‡πå‡∏ö‡∏≠‡∏•',
    icon: 'üèê',
    category: 'Team Sports',
    events: [
      { name_en: 'Indoor', name_th: '‡πÉ‡∏ô‡∏£‡πà‡∏°', dates: '12-19 Dec', venue_en: 'Indoor Stadium Huamark', venue_th: '‡∏≠‡∏¥‡∏ô‡∏î‡∏≠‡∏£‡πå‡∏™‡πÄ‡∏ï‡πÄ‡∏î‡∏µ‡πâ‡∏¢‡∏° ‡∏´‡∏±‡∏ß‡∏´‡∏°‡∏≤‡∏Å' },
      { name_en: 'Beach', name_th: '‡∏ä‡∏≤‡∏¢‡∏´‡∏≤‡∏î', dates: '14-19 Dec', venue_en: 'Sport Arena Jomtien Beach', venue_th: '‡∏™‡∏ô‡∏≤‡∏°‡∏Å‡∏µ‡∏¨‡∏≤‡∏ó‡∏µ‡∏°‡∏´‡∏≤‡∏î‡∏à‡∏≠‡∏°‡πÄ‡∏ó‡∏µ‡∏¢‡∏ô' }
    ]
  },
  {
    id: 'boxing',
    name_en: 'Boxing',
    name_th: '‡∏°‡∏ß‡∏¢‡∏™‡∏≤‡∏Å‡∏•',
    icon: 'ü•ä',
    category: 'Combat Sports',
    events: [
      { name_en: 'Boxing', name_th: '‡∏°‡∏ß‡∏¢‡∏™‡∏≤‡∏Å‡∏•', dates: '10-18 Dec', venue_en: 'Chulalongkorn Univ. Sports Center', venue_th: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏Å‡∏µ‡∏¨‡∏≤‡∏à‡∏∏‡∏¨‡∏≤‡∏•‡∏á‡∏Å‡∏£‡∏ì‡πå‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢' }
    ]
  },
  {
    id: 'taekwondo',
    name_en: 'Taekwondo',
    name_th: '‡πÄ‡∏ó‡∏Ñ‡∏ß‡∏±‡∏ô‡πÇ‡∏î',
    icon: 'ü•ã',
    category: 'Combat Sports',
    events: [
      { name_en: 'Taekwondo', name_th: '‡πÄ‡∏ó‡∏Ñ‡∏ß‡∏±‡∏ô‡πÇ‡∏î', dates: '9-12 Dec', venue_en: 'Island Hall, Fashion Island', venue_th: '‡πÑ‡∏≠‡∏™‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå‡∏Æ‡∏≠‡∏•‡∏•‡πå ‡πÅ‡∏ü‡∏ä‡∏±‡πà‡∏ô‡πÑ‡∏≠‡∏™‡πå‡πÅ‡∏•‡∏ô‡∏î‡πå' }
    ]
  },
  {
    id: 'tennis',
    name_en: 'Tennis',
    name_th: '‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡∏™',
    icon: 'üéæ',
    category: 'Racket Sports',
    events: [
      { name_en: 'Tennis', name_th: '‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡∏™', dates: '11-19 Dec', venue_en: 'National Tennis Development Center', venue_th: '‡∏®‡∏π‡∏ô‡∏¢‡πå‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏µ‡∏¨‡∏≤‡πÄ‡∏ó‡∏ô‡∏ô‡∏¥‡∏™‡πÅ‡∏´‡πà‡∏á‡∏ä‡∏≤‡∏ï‡∏¥' }
    ]
  }
];

const translations = {
  en: {
    title: 'SEA Games 2025 Schedule',
    searchPlaceholder: 'Search...',
    noResults: 'No results found.',
    venue: 'Venue',
    dates: 'Dates',
    events: 'Events',
    back: 'Back',
    settings: 'Settings',
    fontSize: 'Font Size',
    theme: 'Theme',
    language: 'Language',
    footer: '33rd SEA Games Bangkok - Chonburi (9 - 20 Dec 2025)',
    viewSports: 'Sports',
    viewDate: 'Schedule',
    viewVenue: 'Venues',
    category: 'Category',
  },
  th: {
    title: '‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô‡∏ã‡∏µ‡πÄ‡∏Å‡∏°‡∏™‡πå 2025',
    searchPlaceholder: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤...',
    noResults: '‡πÑ‡∏°‡πà‡∏û‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
    venue: '‡∏™‡∏ô‡∏≤‡∏°‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô',
    dates: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà',
    events: '‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏Ç‡πà‡∏á‡∏Ç‡∏±‡∏ô',
    back: '‡∏Å‡∏•‡∏±‡∏ö',
    settings: '‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤',
    fontSize: '‡∏Ç‡∏ô‡∏≤‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£',
    theme: '‡∏ò‡∏µ‡∏°‡∏™‡∏µ',
    language: '‡∏†‡∏≤‡∏©‡∏≤',
    footer: '‡∏ã‡∏µ‡πÄ‡∏Å‡∏°‡∏™‡πå ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 33 ‡∏Å‡∏£‡∏∏‡∏á‡πÄ‡∏ó‡∏û‡∏Ø - ‡∏ä‡∏•‡∏ö‡∏∏‡∏£‡∏µ (9 - 20 ‡∏ò.‡∏Ñ. 2568)',
    viewSports: '‡∏Å‡∏µ‡∏¨‡∏≤',
    viewDate: '‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà',
    viewVenue: '‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà',
    category: '‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó',
  }
};

// --- Helper Functions ---

const getGoogleMapsLink = (venueName) => {
  return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(venueName)}`;
};

// --- Components ---

const Modal = ({ isOpen, onClose, children }) => {
  if (!isOpen) return null;
  return (
    <div className="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/60 backdrop-blur-sm animate-fade-in" onClick={onClose}>
      <div className="bg-white rounded-2xl shadow-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto transform transition-all scale-100" onClick={e => e.stopPropagation()}>
        {children}
      </div>
    </div>
  );
};

// Helper to flatten sports events for Date/Venue views
const getAllEvents = (data) => {
  let events = [];
  data.forEach(sport => {
    sport.events.forEach(event => {
      events.push({
        ...event,
        sportId: sport.id,
        sportName_en: sport.name_en,
        sportName_th: sport.name_th,
        sportIcon: sport.icon,
        category: sport.category
      });
    });
  });
  return events;
};

// Helper to sort date ranges simple logic: use first number found
const parseDateSort = (dateStr) => {
  const match = dateStr.match(/\d+/);
  return match ? parseInt(match[0], 10) : 99;
};

export default function SEAGamesApp() {
  const [lang, setLang] = useState('th'); // 'th' or 'en'
  const [fontSize, setFontSize] = useState(1); // Scale factor
  const [searchQuery, setSearchQuery] = useState('');
  const [selectedSport, setSelectedSport] = useState(null);
  const [showSettings, setShowSettings] = useState(false);
  const [viewMode, setViewMode] = useState('sports'); // 'sports', 'dates', 'venues'
  const [selectedCategory, setSelectedCategory] = useState('All'); // Added state for category filter

  const t = translations[lang];

  // --- Data Transformation ---

  // 1. Filtered Sports List (for Sports View)
  const filteredSports = useMemo(() => {
    const query = searchQuery.toLowerCase();
    
    return sportsData.filter(sport => {
      // 1. Search Filter
      const matchesSearch = 
        sport.name_en.toLowerCase().includes(query) || 
        sport.name_th.toLowerCase().includes(query);
      
      // 2. Category Filter
      let matchesCategory = true;
      if (selectedCategory !== 'All') {
        matchesCategory = sport.category.includes(selectedCategory);
      }

      return matchesSearch && matchesCategory;
    });
  }, [searchQuery, selectedCategory]);

  // 2. Flattened & Filtered Events (for Date/Venue Views)
  const filteredEvents = useMemo(() => {
    const query = searchQuery.toLowerCase();
    const all = getAllEvents(sportsData);
    return all.filter(event => 
      event.sportName_en.toLowerCase().includes(query) || 
      event.sportName_th.toLowerCase().includes(query) ||
      event.name_en.toLowerCase().includes(query) ||
      event.name_th.toLowerCase().includes(query) ||
      event.venue_en.toLowerCase().includes(query) ||
      event.venue_th.toLowerCase().includes(query)
    );
  }, [searchQuery]);

  // 3. Group by Date
  const eventsByDate = useMemo(() => {
    const grouped = {};
    filteredEvents.forEach(event => {
      if (!grouped[event.dates]) grouped[event.dates] = [];
      grouped[event.dates].push(event);
    });
    // Sort keys by date number
    return Object.keys(grouped)
      .sort((a, b) => parseDateSort(a) - parseDateSort(b))
      .map(date => ({ date, events: grouped[date] }));
  }, [filteredEvents]);

  // 4. Group by Venue
  const eventsByVenue = useMemo(() => {
    const grouped = {};
    filteredEvents.forEach(event => {
      const venueKey = lang === 'th' ? event.venue_th : event.venue_en;
      if (!grouped[venueKey]) grouped[venueKey] = [];
      grouped[venueKey].push(event);
    });
    return Object.keys(grouped).sort().map(venue => ({ venue, events: grouped[venue] }));
  }, [filteredEvents, lang]);


  const contentStyle = {
    fontSize: `${fontSize}rem`,
    fontFamily: "'Prompt', sans-serif"
  };

  return (
    <div className="min-h-screen bg-slate-50 text-slate-800 transition-all duration-300" style={contentStyle}>
      
      {/* Import Google Font: Prompt */}
      <style>{`
        @import url('https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap');
      `}</style>

      {/* Header */}
      <header className="sticky top-0 z-30 bg-white/95 backdrop-blur-md border-b border-slate-200 shadow-sm pb-1">
        <div className="max-w-3xl mx-auto px-4 py-3 flex items-center justify-between">
          <div className="flex items-center gap-3">
            {/* Replaced broken image with custom SVG Logo */}
            <SEAGamesLogo />
            <div>
              <h1 className="font-bold text-lg leading-tight text-blue-900">
                {lang === 'th' ? '‡∏ã‡∏µ‡πÄ‡∏Å‡∏°‡∏™‡πå 2025' : 'SEA Games 2025'}
              </h1>
              <p className="text-xs text-slate-500 font-medium">Bangkok - Chonburi</p>
            </div>
          </div>

          <div className="flex items-center gap-2">
            <button 
              onClick={() => setLang(lang === 'th' ? 'en' : 'th')}
              className="p-2 rounded-full hover:bg-slate-100 transition-colors flex items-center gap-1 font-semibold text-sm text-blue-700 border border-blue-100 bg-blue-50"
            >
              <Globe size={18} />
              {lang.toUpperCase()}
            </button>
            <button 
              onClick={() => setShowSettings(true)}
              className="p-2 rounded-full hover:bg-slate-100 text-slate-600 transition-colors"
            >
              <Type size={20} />
            </button>
          </div>
        </div>

        {/* Search Bar */}
        <div className="max-w-3xl mx-auto px-4 pb-2">
          <div className="relative group">
            <div className="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none text-slate-400 group-focus-within:text-blue-500 transition-colors">
              <Search size={20} />
            </div>
            <input
              type="text"
              placeholder={t.searchPlaceholder}
              className="block w-full pl-10 pr-4 py-3 bg-slate-100 border-none rounded-2xl focus:ring-2 focus:ring-blue-500 focus:bg-white transition-all shadow-inner text-slate-700 placeholder-slate-400"
              value={searchQuery}
              onChange={(e) => setSearchQuery(e.target.value)}
            />
            {searchQuery && (
              <button 
                onClick={() => setSearchQuery('')}
                className="absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-600"
              >
                <X size={18} />
              </button>
            )}
          </div>
        </div>

        {/* View Toggles (Tabs) */}
        <div className="max-w-3xl mx-auto px-4 pb-2 overflow-x-auto no-scrollbar">
          <div className="flex p-1 bg-slate-100 rounded-xl whitespace-nowrap">
            <button
              onClick={() => setViewMode('sports')}
              className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${viewMode === 'sports' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}
            >
              <Dumbbell size={16} />
              {t.viewSports}
            </button>
            <button
              onClick={() => setViewMode('dates')}
              className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${viewMode === 'dates' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}
            >
              <CalendarDays size={16} />
              {t.viewDate}
            </button>
            <button
              onClick={() => setViewMode('venues')}
              className={`flex-1 flex items-center justify-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold transition-all ${viewMode === 'venues' ? 'bg-white text-blue-600 shadow-sm' : 'text-slate-500 hover:text-slate-700'}`}
            >
              <Map size={16} />
              {t.viewVenue}
            </button>
          </div>
        </div>
      </header>

      {/* Main Content */}
      <main className="max-w-3xl mx-auto p-4 pb-20">
        
        {/* VIEW 1: SPORTS (Cards) */}
        {viewMode === 'sports' && (
          <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 animate-fade-in">
            {/* Category Filter Chips - Fixed: Now clickable and connected to state */}
             {!searchQuery && (
              <div className="col-span-full flex gap-2 overflow-x-auto pb-4 mb-2 no-scrollbar">
                {['All', 'Team', 'Combat', 'Water', 'Racket'].map((tag, i) => (
                  <button 
                    key={i} 
                    onClick={() => setSelectedCategory(tag)}
                    className={`px-4 py-1.5 rounded-full text-sm font-medium whitespace-nowrap transition-all active:scale-95
                      ${selectedCategory === tag 
                        ? 'bg-blue-600 text-white shadow-md shadow-blue-200' 
                        : 'bg-white text-slate-600 border border-slate-200 hover:bg-slate-50'}`}
                  >
                    {lang === 'th' && tag === 'All' ? '‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î' : tag}
                  </button>
                ))}
              </div>
            )}

            {filteredSports.length > 0 ? (
              filteredSports.map((sport) => (
                <div 
                  key={sport.id}
                  onClick={() => setSelectedSport(sport)}
                  className="bg-white rounded-2xl p-4 shadow-sm border border-slate-100 hover:shadow-md hover:border-blue-200 transition-all cursor-pointer flex items-center justify-between group active:scale-[0.98]"
                >
                  <div className="flex items-center gap-4">
                    <div className="w-12 h-12 rounded-full bg-blue-50 text-2xl flex items-center justify-center group-hover:bg-blue-100 transition-colors">
                      {sport.icon}
                    </div>
                    <div>
                      <h3 className="font-bold text-slate-800 text-lg">
                        {lang === 'th' ? sport.name_th : sport.name_en}
                      </h3>
                      <p className="text-sm text-slate-500">
                        {sport.events.length} {t.events}
                      </p>
                    </div>
                  </div>
                  <div className="text-slate-300 group-hover:text-blue-500 transition-colors">
                    <ChevronRight size={24} />
                  </div>
                </div>
              ))
            ) : (
              <EmptyState t={t} />
            )}
          </div>
        )}

        {/* VIEW 2: DATES (List) */}
        {viewMode === 'dates' && (
          <div className="space-y-6 animate-fade-in">
            {eventsByDate.length > 0 ? (
              eventsByDate.map((group, idx) => (
                <div key={idx}>
                  <div className="sticky top-[168px] z-10 bg-slate-50/95 backdrop-blur py-2 mb-2 border-b border-slate-200">
                    <h3 className="text-lg font-bold text-blue-800 flex items-center gap-2">
                      <Calendar size={20} />
                      {group.date}
                    </h3>
                  </div>
                  <div className="space-y-3">
                    {group.events.map((event, eIdx) => (
                      <EventCard key={eIdx} event={event} lang={lang} showVenue={true} />
                    ))}
                  </div>
                </div>
              ))
            ) : (
              <EmptyState t={t} />
            )}
          </div>
        )}

        {/* VIEW 3: VENUES (List) */}
        {viewMode === 'venues' && (
          <div className="space-y-6 animate-fade-in">
             {eventsByVenue.length > 0 ? (
              eventsByVenue.map((group, idx) => (
                <div key={idx}>
                  <div className="sticky top-[168px] z-10 bg-slate-50/95 backdrop-blur py-2 mb-2 border-b border-slate-200 flex items-center justify-between">
                    <h3 className="text-lg font-bold text-red-600 flex items-center gap-2">
                      <MapPin size={20} />
                      {group.venue}
                    </h3>
                    {/* Header Map Link */}
                    <a 
                      href={getGoogleMapsLink(group.venue)}
                      target="_blank"
                      rel="noopener noreferrer"
                      className="p-1.5 rounded-full bg-red-50 text-red-600 hover:bg-red-100 transition-colors"
                      title="Open in Google Maps"
                    >
                      <ExternalLink size={18} />
                    </a>
                  </div>
                  <div className="space-y-3">
                    {group.events.map((event, eIdx) => (
                      <EventCard key={eIdx} event={event} lang={lang} showDate={true} />
                    ))}
                  </div>
                </div>
              ))
            ) : (
              <EmptyState t={t} />
            )}
          </div>
        )}

      </main>

      {/* Footer */}
      <footer className="fixed bottom-0 w-full bg-white border-t border-slate-200 py-3 text-center text-xs text-slate-500 z-10">
        <p>{t.footer}</p>
      </footer>

      {/* Sport Detail Modal (Only used in Sports View) */}
      <Modal isOpen={!!selectedSport} onClose={() => setSelectedSport(null)}>
        {selectedSport && (
          <div className="relative">
            <div className="h-24 bg-gradient-to-r from-blue-600 to-indigo-600 rounded-t-2xl flex items-center justify-center">
               <span className="text-6xl drop-shadow-lg transform translate-y-4">{selectedSport.icon}</span>
            </div>
            
            <button 
              onClick={() => setSelectedSport(null)}
              className="absolute top-3 right-3 p-2 bg-black/20 hover:bg-black/30 text-white rounded-full backdrop-blur-sm transition-colors"
            >
              <X size={20} />
            </button>

            <div className="p-6 pt-8">
              <h2 className="text-2xl font-bold text-center mb-1 text-slate-800">
                {lang === 'th' ? selectedSport.name_th : selectedSport.name_en}
              </h2>
              <p className="text-center text-slate-500 mb-6 text-sm font-medium uppercase tracking-wide">
                {selectedSport.category}
              </p>

              <div className="space-y-4">
                {selectedSport.events.map((event, idx) => {
                  const venueName = lang === 'th' ? event.venue_th : event.venue_en;
                  return (
                    <div key={idx} className="bg-slate-50 rounded-xl p-4 border border-slate-100">
                      <h4 className="font-bold text-blue-900 mb-2 flex items-center gap-2">
                        <Trophy size={16} className="text-yellow-500" />
                        {lang === 'th' ? event.name_th : event.name_en}
                      </h4>
                      
                      <div className="grid grid-cols-[20px_1fr] gap-2 text-sm text-slate-600 mb-2">
                        <Calendar size={16} className="mt-0.5 text-blue-500" />
                        <span>{event.dates} 2025</span>
                      </div>
                      
                      <div className="grid grid-cols-[20px_1fr] gap-2 text-sm text-slate-600">
                        <MapPin size={16} className="mt-0.5 text-red-500" />
                        <a 
                          href={getGoogleMapsLink(venueName)}
                          target="_blank"
                          rel="noopener noreferrer"
                          className="hover:text-blue-600 hover:underline flex items-start gap-1 group"
                        >
                          <span>{venueName}</span>
                          <ExternalLink size={12} className="mt-0.5 opacity-50 group-hover:opacity-100" />
                        </a>
                      </div>
                    </div>
                  );
                })}
              </div>
            </div>
            
            <div className="p-4 border-t border-slate-100 bg-slate-50/50 rounded-b-2xl">
              <button 
                onClick={() => setSelectedSport(null)}
                className="w-full py-3 bg-white border border-slate-300 rounded-xl font-semibold text-slate-700 hover:bg-slate-50 active:bg-slate-100 transition-colors"
              >
                {t.back}
              </button>
            </div>
          </div>
        )}
      </Modal>

      {/* Settings Modal */}
      <Modal isOpen={showSettings} onClose={() => setShowSettings(false)}>
        <div className="p-6">
          <div className="flex items-center justify-between mb-6">
            <h3 className="text-xl font-bold flex items-center gap-2">
              <Type size={24} className="text-blue-600" />
              {t.settings}
            </h3>
            <button onClick={() => setShowSettings(false)} className="text-slate-400 hover:text-slate-600">
              <X size={24} />
            </button>
          </div>

          <div className="space-y-6">
            <div>
              <label className="block text-sm font-medium text-slate-700 mb-3">{t.fontSize}</label>
              <div className="flex items-center gap-4 bg-slate-100 p-2 rounded-xl">
                <button 
                  onClick={() => setFontSize(0.85)}
                  className={`flex-1 py-2 rounded-lg text-sm font-medium transition-all ${fontSize === 0.85 ? 'bg-white shadow text-blue-600' : 'text-slate-500 hover:bg-slate-200'}`}
                >
                  A-
                </button>
                <button 
                  onClick={() => setFontSize(1)}
                  className={`flex-1 py-2 rounded-lg text-base font-medium transition-all ${fontSize === 1 ? 'bg-white shadow text-blue-600' : 'text-slate-500 hover:bg-slate-200'}`}
                >
                  A
                </button>
                <button 
                  onClick={() => setFontSize(1.15)}
                  className={`flex-1 py-2 rounded-lg text-lg font-medium transition-all ${fontSize === 1.15 ? 'bg-white shadow text-blue-600' : 'text-slate-500 hover:bg-slate-200'}`}
                >
                  A+
                </button>
              </div>
            </div>

            <div>
              <label className="block text-sm font-medium text-slate-700 mb-3">{t.language}</label>
              <div className="grid grid-cols-2 gap-3">
                <button 
                  onClick={() => setLang('th')}
                  className={`p-3 rounded-xl border-2 flex items-center justify-center gap-2 transition-all ${lang === 'th' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-slate-200 hover:border-blue-200'}`}
                >
                  <span className="text-2xl">üáπüá≠</span> ‡πÑ‡∏ó‡∏¢
                </button>
                <button 
                  onClick={() => setLang('en')}
                  className={`p-3 rounded-xl border-2 flex items-center justify-center gap-2 transition-all ${lang === 'en' ? 'border-blue-500 bg-blue-50 text-blue-700' : 'border-slate-200 hover:border-blue-200'}`}
                >
                  <span className="text-2xl">üá¨üáß</span> English
                </button>
              </div>
            </div>
          </div>
          
          <div className="mt-8 text-center">
            <p className="text-xs text-slate-400">Created for SEA Games 2025 Demo</p>
          </div>
        </div>
      </Modal>

      <style>{`
        @keyframes fade-in {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fade-in {
          animation: fade-in 0.2s ease-out;
        }
        .no-scrollbar::-webkit-scrollbar {
          display: none;
        }
        .no-scrollbar {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
      `}</style>
    </div>
  );
}

// Sub-component for individual event card in list views
const EventCard = ({ event, lang, showVenue = false, showDate = false }) => {
  const venueName = lang === 'th' ? event.venue_th : event.venue_en;
  
  return (
    <div className="bg-white p-4 rounded-xl border border-slate-100 shadow-sm flex items-start gap-4 hover:shadow-md transition-all">
      <div className="w-10 h-10 rounded-full bg-slate-50 flex items-center justify-center text-xl shrink-0">
        {event.sportIcon}
      </div>
      <div className="flex-1 min-w-0">
        <div className="flex justify-between items-start mb-1">
          <h4 className="font-bold text-slate-800 text-sm truncate pr-2">
            {lang === 'th' ? event.sportName_th : event.sportName_en}
          </h4>
          <span className="text-xs font-medium px-2 py-0.5 rounded-full bg-blue-50 text-blue-600 whitespace-nowrap">
            {lang === 'th' ? event.name_th : event.name_en}
          </span>
        </div>
        
        <div className="text-xs text-slate-500 space-y-1">
          {showDate && (
            <div className="flex items-center gap-1.5">
              <Calendar size={14} className="text-blue-400" />
              <span>{event.dates}</span>
            </div>
          )}
          {showVenue && (
            <div className="flex items-center gap-1.5">
              <MapPin size={14} className="text-red-400 shrink-0" />
              <a 
                href={getGoogleMapsLink(venueName)}
                target="_blank"
                rel="noopener noreferrer"
                className="truncate hover:text-blue-600 hover:underline flex items-center gap-1 group"
                onClick={(e) => e.stopPropagation()}
              >
                {venueName}
                <ExternalLink size={10} className="opacity-50 group-hover:opacity-100" />
              </a>
            </div>
          )}
        </div>
      </div>
    </div>
  );
};

const EmptyState = ({ t }) => (
  <div className="col-span-full py-12 text-center text-slate-400">
    <div className="mb-4 inline-block p-4 rounded-full bg-slate-100">
      <Search size={32} />
    </div>
    <p>{t.noResults}</p>
  </div>
);